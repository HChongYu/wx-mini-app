<!-- packageTree/message/message.wxml -->
<wxs src="../../wxs/filters.wxs" module="filters" />
<jh-hint disable='{{disable}}' disableHint='{{disableHint}}'/>
<view class="header">
  <view class="capsule">
    <view class="capsule-left {{atIndex==0?'capsule-pitch':''}}" data-index='0' catch:tap='capsuleClick'>
      全部
    </view>
    <view class="capsule-right {{atIndex==1?'capsule-pitch':''}}" data-index='1' catch:tap='capsuleClick'>
      未读
    </view>
  </view>
  <view class='clear' catch:tap='handleMessage' wx:if='{{atIndex==0&&messageList.length}}'>
    消除所有消息
  </view>
  <view class='clear' catch:tap='handleMessage' wx:elif='{{messageReadList.length}}'>所有未读标记已读</view>
</view>
<view class='message-top' wx:if='{{atIndex==0}}'>
  <jh-empty length='{{length1}}' loading='{{loading1}}' hasData='{{hasNextPage1}}'>
    <block wx:for='{{messageList}}' wx:key='index'>
      <view wx:for='{{item}}' wx:key='tipId' data-viewid='{{item.viewId}}' data-tipid='{{item.tipId}}' data-hasread='{{item.hasRead}}' catch:tap="goTree">
        <jh-title title='{{item.title}}'></jh-title>
        <view class='message-hint jh-fwm5'>{{item.content}}</view>
        <view class='message-chat'>
          <view class='message-chat-content'>{{item.content}}</view>
          <view class='message-chat-createAt'>{{item.createAt}}</view>
        </view>
        <!-- <view style="font-size:24rpx;color:#c9c9c9;">{{item.hasRead?'未读':'已读'}}</view> -->
      </view>
    </block>
  </jh-empty>
</view>
<view class='message-top' wx:else>
  <jh-empty length='{{length2}}' loading='{{loading2}}' hasData='{{hasNextPage2}}'>
    <block wx:for='{{messageReadList}}' wx:key='index'>
      <view wx:for='{{item}}' wx:key='tipId' data-viewid='{{item.viewId}}' data-tipid='{{item.tipId}}' data-hasread='{{item.hasRead}}' catch:tap="goTree">
        <jh-title title='{{item.title}}'></jh-title>
        <view class='message-hint jh-fwm5'>{{item.content}}</view>
        <view class='message-chat'>
          <view class='message-chat-content'>{{item.content}}</view>
          <view class='message-chat-createAt'>{{item.createAt}}</view>
        </view>
      </view>
    </block>
  </jh-empty>
</view>